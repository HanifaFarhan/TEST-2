<html lang="en">
<head>
  <title></title>
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
   <!-- <link rel="stylesheet" href="ex.css"> -->
</head>
<body>

<div class="container">
  <form id = "myForm">
  <h2 style="color: ">Sign Up form</h2>
    <div class="form-group">
      <label for="fname" style="padding-top: 25px">First Name:</label>
      <input type="text" class="form-control" id="fname" placeholder="Enter First Name" name="first_name">
    </div>

    <div class="form-group">
      <label for="Last name">Last Name:</label>
      <input type="text" class="form-control" id="lname" placeholder="Enter Last Name" name="last_name">
    </div>

    <div class="form-group">
      <label for="country">Country:</label>
      <select id="country" name="country">
       <option value="India">India</option>
       <option value="USA">USA</option>
       <option value="UK">UK</option>
      </select>
    </div>

    <div class="form-group">
      <label for="city">City:</label>
      <select id="city" name="city">
      </select>
    </div>

    <div class="form-group">
      <label for="gender" >Gender:</label>
       <input type="radio" name="gender" value="male" checked id="male"> Male
       <input type="radio" name="gender" value="female" id="female"> Female 
    </div>

    <div class="form-group">
      <label for="email">Email:</label>
      <input type="text" class="form-control" id="email" placeholder="Enter email" name="email">
    </div>

    <div class="form-group">
      <label for="pwd">Password:</label>
      <input type="password" class="form-control" id="pwd" placeholder="Enter password" name="pwd">
    </div>

    <div class="form-group">
      <label for="rpwd">Re-Password:</label>
      <input type="password" class="form-control" id="rpwd" placeholder="Enter Re-password" name="rpwd">
    </div>
   
    <button type="button" class="btn btn-default" id = "submit1">Sign Up </button>
     <br><p style="font-weight: bold; color: red" id="lblResponse"></p>
  </form>

</div>


<script type="text/javascript">

$("#submit1").click(function(){
 // alert('loading');
     console.log($('#myForm').serialize());
     var first = $("#fname").val();
     var last = $("#lname").val();
     var country = $("#country").val();
     var city = $("#city").val();
     var male = $("#male").val();
     var female = $("#female").val();
     var uname  = $("#email").val();
     var upass = $("#pwd").val();
     var rpwd = $("#rpwd").val();
     var regData ={'first': first,'last':last ,'country': country,'city':city ,'male': male,'female':female, 'name':uname,'pass':upass ,'rpwd':rpwd};
    // alert('taking parameter');
       $.ajax({
         type : 'POST',
         url : '/process_post',
        // data : regData,
         success: function(data){
         //document.write(JSON.stringify(data));
      // $('#lblResponse').html(JSON.stringify(data));
       $('#lblResponse').html('Redirecting....');
         },

         error: function (xhr,status, error) {
        //  var response = JSON.parse(xhr.responseText);
            
          $('#lblResponse').html('Error connecting to the server.');

          },

          statusCode: {
                404: function() {
               // alert( "page not found" );
                $('#lblResponse').html('Invalid Email and password match');
               },
               403: function() {
               // alert( "page not found" );
                $('#lblResponse').html('password does not match');
               }
            }  
       });
   });


    $(document).ready(function(){
    $("#country").change(function(){
        var selectedCountry = $("#country").val();
        $.ajax({
            type: "POST",
            url: '/country_get',
            data: { country : selectedCountry } ,
            success: function(data){
                var optionHTML = '';
                for(var i=0;i<data.length;i++){
                    optionHTML += "<option value="+data[i]+">"+data[i]+"</option>";
                }
               $("#city").html(optionHTML);
            }
        });
    });
});

</script>




</body>
</html>